package cn.com.evo.integration.scyd.pay.dto;import cn.com.evo.cms.domain.entity.cms.Content;import cn.com.evo.cms.domain.enums.ContentClassifyEnum;import cn.com.evo.integration.common.ConstantFactory;import cn.com.evo.integration.scyd.common.ConstantEnum;import com.alibaba.fastjson.JSONArray;import com.alibaba.fastjson.JSONObject;import com.google.common.collect.Lists;import java.util.List;/** * @Description: * @author: lu.xin * @create: 2019-04-09 3:46 PM **/public class ScydBindRequestDto {    /**     * 产品包id     */    private String packageId = ConstantFactory.map.get(ConstantEnum.product_id.getKey());    /**     * 动作     * 发布－REGIST     * 删除－DELETE     */    private String action;    /**     * 商户id     */    private String merchantId = ConstantFactory.map.get(ConstantEnum.merchant_id.getKey());    /**     * 操作内容     */    private List<ScydContent> contentList;    /**     * 发布或删除初始化     *     * @param action   发布－REGIST     *                 删除－DELETE     * @param contents 内容list     */    public ScydBindRequestDto(String action, List<Content> contents) {        this.action = action;        this.packageId = ConstantFactory.map.get(ConstantEnum.product_id.getKey());        this.merchantId = ConstantFactory.map.get(ConstantEnum.merchant_id.getKey());        List<ScydContent> contentList = Lists.newArrayList();        for (Content content : contents) {            ScydContent scydContent = new ScydContent();            scydContent.setContentId(content.getId());            scydContent.setContentName(content.getName());            scydContent.setAction(action);            if (content.getClassify() == ContentClassifyEnum.movie.getIndex()) {                scydContent.setType("1");            } else if (content.getClassify() == ContentClassifyEnum.episode_child.getIndex()) {                scydContent.setType("3");            } else {                throw new RuntimeException("暂不支持该内容类型的内容进行产品绑定操作");            }            contentList.add(scydContent);        }        this.contentList = contentList;    }    /**     * 转换为json对象     *     * @return     */    public JSONObject toJson() {        JSONObject jsonObject = new JSONObject();        jsonObject.put("packageId", packageId);        jsonObject.put("action", action);        jsonObject.put("merchantId", merchantId);        JSONArray temp = new JSONArray();        for (ScydContent content : contentList) {            JSONObject json = new JSONObject();            json.put("contentId", content.getContentId());            json.put("contentName", content.getContentName());            json.put("action", content.getAction());            json.put("type", content.getType());            temp.add(json);        }        jsonObject.put("contentList", temp);        return jsonObject;    }    class ScydContent {        /**         * 内容id，使用注入内容的id         */        private String contentId;        /**         * 内容名称         */        private String contentName;        /**         * 动作         * 发布－REGIST         * 删除－DELETE         */        private String action;        /**         * 内容类型         * 1：电影         * 2：频道         * 3：电视剧         */        private String type;        public String getContentId() {            return contentId;        }        public void setContentId(String contentId) {            this.contentId = contentId;        }        public String getContentName() {            return contentName;        }        public void setContentName(String contentName) {            this.contentName = contentName;        }        public String getAction() {            return action;        }        public void setAction(String action) {            this.action = action;        }        public String getType() {            return type;        }        public void setType(String type) {            this.type = type;        }    }    public String getPackageId() {        return packageId;    }    public void setPackageId(String packageId) {        this.packageId = packageId;    }    public String getAction() {        return action;    }    public void setAction(String action) {        this.action = action;    }    public String getMerchantId() {        return merchantId;    }    public void setMerchantId(String merchantId) {        this.merchantId = merchantId;    }    public List<ScydContent> getContentList() {        return contentList;    }    public void setContentList(List<ScydContent> contentList) {        this.contentList = contentList;    }}